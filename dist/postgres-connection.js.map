{"version":3,"sources":["../src/postgres-connection.js"],"names":["PostgresConnection","pool","connectionString","_pool","connect","_connect","query","rawClient","convert","column","value","types","getTypeParser","type"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEe,MAAMA,kBAAN,sCAAoD;AACjE,SAAOC,IAAP,CAAYC,gBAAZ,EAA8B;AAC5B,WAAO,KAAKC,KAAL,qBAAuBD,gBAAvB,CAAP;AACD;;AAED,SAAaE,OAAb,CAAqBF,gBAArB,EAAuC;AAAA;;AAAA;AACrC,aAAO,MAAKG,QAAL,CAAcL,kBAAd,EAAkCE,gBAAlC,CAAP;AADqC;AAEtC;;AAEDI,UAAe;AACb,WAAO,6BAAmB,IAAnB,EAAyB,KAAKC,SAAL,CAAeD,KAAf,CAAqB,YAArB,CAAzB,EAAwD,KAAKE,OAA7D,CAAP;AACD;;AAEDA,gBAAyB;AAAA,QAAhBC,MAAgB,QAAhBA,MAAgB;AAAA,QAARC,KAAQ,QAARA,KAAQ;;AACvB,WAAO,aAAGC,KAAH,CAASC,aAAT,CAAuBH,OAAOI,IAA9B,EAAoCH,KAApC,CAAP;AACD;AAfgE;kBAA9CV,kB","file":"postgres-connection.js","sourcesContent":["import { createPool } from 'minipg';\nimport DatabaseCursor from './database-cursor';\nimport DatabaseConnection from './database-connection';\nimport pg from 'pg';\n\nexport default class PostgresConnection extends DatabaseConnection {\n  static pool(connectionString) {\n    return this._pool(createPool, connectionString);\n  }\n\n  static async connect(connectionString) {\n    return this._connect(PostgresConnection, connectionString);\n  }\n\n  query(...args) {\n    return new DatabaseCursor(this, this.rawClient.query(...args), this.convert);\n  }\n\n  convert({column, value}) {\n    return pg.types.getTypeParser(column.type)(value);\n  }\n}\n"]}